package medium;

import java.util.Arrays;

public class Problem_3153_SumDigitDifferences {
    public static long combination(int n){
        return (long) n * (n - 1) / 2;
    }
    public static long getRes(long res, int[] cnt1, int[] cnt2, int[] cnt3, int i) {
        if (cnt1[i] > 1){
            res -= combination(cnt1[i]);
        }
        if (cnt2[i] > 1){
            res -= combination(cnt2[i]);
        }
        if (cnt3[i] > 1){
            res -= combination(cnt3[i]);
        }
        return res;
    }
    public static long sumDigitDifferences(int[] nums) {
        // n <= 10^9 --> tao ra 9 mang dem phan phoi (i = 1-->9) tuong ung chu so thu i
        /*
        res = 0;
            Duyet mang dem phan phoi (i = 1 --> 9)
            + b1, dem to hop so lan xuat hien cua cac cap:
                -- so lan xuat hien cua tat ca cac chu so = sum_all(cnt[i])
                -- so lan tong = 2_C_sum_all
                -- res = so lan tong
            + b2, tru di so lan xuat hien trung lap
                -- neu cnt[i] > 1: res -= 2_C_cnt[i]
            + b3, return res
         */
        // do phuc tap: O(n*10) = O(n)
        long res = 0;
        int[] cnt1 = new int[11];
        int[] cnt2 = new int[11];
        int[] cnt3 = new int[11];
        int[] cnt4 = new int[11];
        int[] cnt5 = new int[11];
        int[] cnt6 = new int[11];
        int[] cnt7 = new int[11];
        int[] cnt8 = new int[11];
        int[] cnt9 = new int[11];
        int[] cnt10 = new int[11];
        for (int i = 0; i < nums.length; i++){
            String str = String.valueOf(nums[i]);
            for (int ii = 0; ii < str.length(); ii++){
                if (ii == 0){
                    cnt1[str.charAt(ii) - '0']++;
                }
                if (ii == 1){
                    cnt2[str.charAt(ii) - '0']++;
                }
                if (ii == 2){
                    cnt3[str.charAt(ii) - '0']++;
                }
                if (ii == 3){
                    cnt4[str.charAt(ii) - '0']++;
                }
                if (ii == 4){
                    cnt5[str.charAt(ii) - '0']++;
                }
                if (ii == 5){
                    cnt6[str.charAt(ii) - '0']++;
                }
                if (ii == 6){
                    cnt7[str.charAt(ii) - '0']++;
                }
                if (ii == 7){
                    cnt8[str.charAt(ii) - '0']++;
                }
                if (ii == 8){
                    cnt9[str.charAt(ii) - '0']++;
                }
                if (ii == 9){
                    cnt10[str.charAt(ii) - '0']++;
                }
            }
        }
//        System.out.println(Arrays.toString(cnt1));
        int sumOfAllOccurrences1 = 0;
        int sumOfAllOccurrences2 = 0;
        int sumOfAllOccurrences3 = 0;
        int sumOfAllOccurrences4 = 0;
        int sumOfAllOccurrences5 = 0;
        int sumOfAllOccurrences6 = 0;
        int sumOfAllOccurrences7 = 0;
        int sumOfAllOccurrences8 = 0;
        int sumOfAllOccurrences9 = 0;
        int sumOfAllOccurrences10 = 0;
        for (int i = 0; i <= 9; i++){
            sumOfAllOccurrences1 += cnt1[i];
            sumOfAllOccurrences2 += cnt2[i];
            sumOfAllOccurrences3 += cnt3[i];
            sumOfAllOccurrences4 += cnt4[i];
            sumOfAllOccurrences5 += cnt5[i];
            sumOfAllOccurrences6 += cnt6[i];
            sumOfAllOccurrences7 += cnt7[i];
            sumOfAllOccurrences8 += cnt8[i];
            sumOfAllOccurrences9 += cnt9[i];
            sumOfAllOccurrences10 += cnt10[i];
            res = getRes(res, cnt1, cnt2, cnt3, i);
            res = getRes(res, cnt4, cnt5, cnt6, i);
            res = getRes(res, cnt7, cnt8, cnt9, i);
            if (cnt10[i] > 1){
                res -= combination(cnt10[i]);
            }
        }
//        System.out.println(res);
//        System.out.println("OK");
//        System.out.println(sumOfAllOccurrences1);
//        System.out.println(sumOfAllOccurrences2);
//        System.out.println(sumOfAllOccurrences3);
//        System.out.println(sumOfAllOccurrences4);
//        System.out.println(sumOfAllOccurrences5);
//        System.out.println(sumOfAllOccurrences6);
//        System.out.println("OK 2");
//        System.out.println(combination(sumOfAllOccurrences1));
//        System.out.println(combination(sumOfAllOccurrences2));
        res += combination(sumOfAllOccurrences1);
        res += combination(sumOfAllOccurrences2);
        res += combination(sumOfAllOccurrences3);
        res += combination(sumOfAllOccurrences4);
        res += combination(sumOfAllOccurrences5);
        res += combination(sumOfAllOccurrences6);
        res += combination(sumOfAllOccurrences7);
        res += combination(sumOfAllOccurrences8);
        res += combination(sumOfAllOccurrences9);
        res += combination(sumOfAllOccurrences10);
        return res;
    }

    public static void main(String[] args) {
        System.out.println(sumDigitDifferences(new int[]{7297998,4120865,3799891,8349368,1110560,3036413,9763752,2731115,1066382,7203843,4948709,5939013,8810425,6606550,7256455,4966213,4182543,2650414,5335228,7775049,8473921,4050087,8120946,8736626,4274835,9835549,7993624,2311503,6576314,6005614,1137332,3919754,8007609,6751386,5182038,4043295,9767041,6463357,2553301,3199171,6695676,1192501,7840940,8477158,4419019,9543035,3747536,5920415,2236222,8523201,9715615,5543193,1537226,5435419,9228423,7147439,3137623,1526241,6838096,6890147,6725483,4946364,1515659,5521293,1243615,4623544,4363123,9954700,8724619,8977479,6571324,2171972,3182165,8377817,9902213,9989939,1848460,9819849,1200637,6697854,3438658,8910112,4878216,8364652,6364314,2619144,8092169,3384158,3371460,9845190,3849185,8448125,6459039,8813125,6419699,3035133,5603748,7750697,2035487,6087661,8721355,3795933,6557058,3426344,7339451,1805468,6205894,6532781,6734862,8799301,7287372,7267003,8191069,3331697,4162087,9248366,1813893,1255880,7573266,8748324,1664999,4270806,1347059,7719865,7463671,2671486,2499250,5448970,4196567,1805439,6305088,1579353,3329114,3520183,3546210,7461700,9021147,9426095,5490647,2929195,5572166,3504475,5807985,9536082,4924514,2437994,2677952,8333960,5532250,3088360,6573418,6220737,1061892,7805190,7953861,8316018,5104123,4552797,6462977,5872923,1765288,2936685,1507481,8817960,3078456,7849287,3422525,1525814,2745982,9306963,6085987,4444365,9073738,4368791,6122223,5803340,8781745,1022650,4945818,5349552,2717411,2867847,2396202,4746345,6160038,9669563,1521318,6093030,6038139,1051009,8759556,1667541,5840776,6099775,5581386,8972810,5179338,7357371,3210358,7855945,6178075,9222737,9775373,3266727,4526716,8516793,9981692,5740175,3341367,8480835,4371960,4217519,3820214,5408216,6240363,6541141,3559318,8498622,2977726,5321010,8828919,4159389,6488429,4654832,6860711,8483046,5448481,1876246,6785665,4964096,3479789,8263593,4951586,7123871,1481118,4419066,2415609,2211804,3907491,7052875,3011990,9119648,1936030,8044661,4993861,8538374,9897266,9383053,8070135,4256353,3734176,4714129,2111438,4479485,2232664,4592404,4078555,6197978,9643030,5193831,2877802,6103117,3837308,6943019,2430061,7091025,1534227,9807969,3834306,3246202,1294837,2725881,9025080,2834340,3966264,7002739,7752035,5568390,3650883,5774533,1606515,2751421,3321614,4461649,2899318,8713723,7259255,7047321,7007561,6092742,7740115,2104280,7952869,3257379,1884268,6396836,6373217,1943274,6224349,6611864,3558949,6381341,7343214,6941576,7478310,8650156,8570704,7241685,9704123,2656869,5482430,6852590,6522227,6093674,2249440,8861639,4088694,8089793,2959381,3237295,1851343,8663094,1967330,3500071,5709413,5298459,3470456,4092040,3348541,4243334,9425338,6404070,8966290,9974134,2751897,6645672,1249244,9688352,7477297,1610662,8600616,9601697,6737488,8673758,9986920,9404102,8336923,1569248,8468442,3165077,3470999,9408835,9751516,1476464,1762446,8494506,7801105,7507197,9257740,9500347,2941933,5189224,8270344,7113229,9606878,7178908,1134299,3508319,7588470,4049856,3676083,6290384,9492267,5597695,9766961,4392004,1530311,3543520,4362028,4973769,3346591,4018289,8599750,4582253,3386388,2854233,5424835,6532191,8703669,5633781,8222782,7576566,1981384,5468797,2947731,7521043,3543464,6946036,8242616,3722461,3999230,5998756,3042975,2236258,1714573,7014000,7802113,5988238,9495658,8822462,9345496,9196647,5869575,9025763,7845614,2149769,3628249,2782073,1980478,3913028,2263862,7788978,5166401,8797491,6523080,6643965,3601165,9265467,8567465,8573185,9596029,6681661,4390999,8147168,2679599,6926870,1685320,7655058,7626236,8292763,6632644,9152213,3345592,3067372,6291203,9505262,4860527,3982198,2509787,1736252,4270386,9255958,8486866,8115201,5695698,8709413,3673495,5238503,2892416,8494279,9672433,1320853,8644029,3434962,2638573,9481486,7537658,9620835,3125586,2558464,4260843,4881390,2109372,7941147,9615130,1539712,2443921,3661308,1694409,7684286,2540954,8382238,1293734,9533603,4159187,7866252,5055271,2436732,8193640,2038461,9090763,1628732,1527234,2961193,8265065,2379644,2831230,2444250,9947016,8134851,6225390,6548042,6435944,2555089,3300620,6852436,6084936,5144602,9912790,2964007,6933103,1875077,4937263,4550744,8495953,3693997,9362557,6356073,2770338,3212629,6994654,5158030,6903641,9010655,8238039,3618781,5768073,9553534,2867134,2884599,1772190,5902724,2359148,9461588,4780894,7792473,8561796,2000578,9604027,8916832,8140397,8228855,5569773,1113129,4612566,3436243,3431022,9439602,8433643,6838987,7700066,9063592,5359546,4683743,7273003,9739847,5746213,8024050,2467219,4174402,3327448,7909852,1934078,3075730,3815436,7555900,5584351,6795036,9069245,3163112,7404965,7839316,6484842,6718611,8801144,6886503,2560116,1236029,5713200,9649416,9354659,2016215,6239542,6052812,7865906,5779914,9845479,1376274,5137396,1409410,4096208,8915740,1639288,6980434,9111547,1126416,7624882,3546026,9561058,1083620,5369229,8728575,4336462,4308753,6955852,6073494,5604947,8309669,1904872,7751475,8595981,8741598,4358762,5495123,1255570,3532244,1823972,7251913,9072081,2702137,3543525,2268659,7897574,3852502,8728625,5313581,6956914,1050934,6751805,4918795,4487695,5919182,1566225,2826289,5373573,4774551,5538753,3383194,5107846,6307555,1011947,7789195,8990068,9341946,8663882,6287743,2058880,6371085,1605096,7463035,6223966,8358365,5046248,6032491,7575679,7511055,2552312,3508173,6838691,2438037,9635902,4155791,6743199,6528891,2206426,1673556,9584025,7129118,3409249,8676362,1794106,2116245,2821915,8170176,7798852,7914613,3833615,5907831,9996189,2733049,5864904,6239740,9753428,7813223,1854372,1830951,6302294,9005831,1752686,6172400,7349856,6742311,3809113,5758784,8506101,3612137,2713622,5003424,9661332,9894888,6590269,3490576,9482894,3777809,9457266,4923215,2599491,7192468,9174859,8836365,9064355,6195467,9522508,5982498,2873275,8094596,5935148,7137892,2209584,6255617,4550254,1185368,5979047,6107751,3753601}));
    }
}
